<div class="card h-100 forum-card">
    <!-- Card body -->
    <div class="card-body pb-0">
        <!-- Forum header -->
        <div class="d-flex align-items-center justify-content-between mb-3">
            <div class="d-flex align-items-center">
                <!-- Subject icon -->
                <div class="icon-md bg-primary bg-opacity-10 text-primary rounded-circle flex-shrink-0 me-2">
                    <i class="fas {{ forum.icon|default('fa-book') }}"></i>
                </div>
                <!-- Info -->
                <div>
                    <h5 class="card-title mb-0">
                        <a href="#" class="stretched-link text-decoration-none">{{ forum.subject }}</a>
                    </h5>
                    <small class="text-muted">{{ forum.teacherName }}</small>
                </div>
            </div>
            <!-- Unread badge -->
            {% if forum.unreadCount > 0 %}
                <span class="badge bg-danger rounded-pill">{{ forum.unreadCount }}</span>
            {% endif %}
        </div>

        <!-- Stats -->
        <div class="d-flex justify-content-between align-items-center mb-3">
            <!-- Online users -->
            <div class="d-flex align-items-center">
                <i class="fas fa-circle text-success me-2 small"></i>
                <span>{{ forum.onlineCount }} {% trans %}ONLINE_KEY{% endtrans %}</span>
            </div>
            <!-- Last activity -->
            <div class="text-muted small">
                <i class="fas fa-clock me-1"></i>
                {{ forum.lastActivity|ago }}
            </div>
        </div>
    </div>

    <!-- Card footer -->
    <div class="card-footer border-0 pt-0 bg-transparent">
        <div class="d-flex align-items-center justify-content-between mt-3">
            <!-- Teacher status -->
            <div class="d-flex align-items-center">
                <div class="avatar avatar-xs me-2 position-relative">
                    <img class="avatar-img rounded-circle" src="{{ forum.teacherAvatar }}" alt="{{ forum.teacherName }}">
                    {% if forum.isTeacherOnline %}
                        <span class="position-absolute top-0 start-100 translate-middle p-1 bg-success border border-light rounded-circle">
                            <span class="visually-hidden">{% trans %}TEACHER_ONLINE_KEY{% endtrans %}</span>
                        </span>
                    {% endif %}
                </div>
                <small class="text-muted">{{ forum.teacherStatus }}</small>
            </div>
            <!-- Participants -->
            <div class="text-muted small">
                <i class="fas fa-users me-1"></i>
                {{ forum.participantCount }}
            </div>
        </div>
    </div>
</div>

<style>
.forum-card {
    transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}

.forum-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 .5rem 1rem rgba(0,0,0,.15);
}

.forum-card .stretched-link::after {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 1;
    content: "";
}

.avatar-xs {
    width: 1.5rem;
    height: 1.5rem;
}

.avatar-xs .avatar-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
</style>
