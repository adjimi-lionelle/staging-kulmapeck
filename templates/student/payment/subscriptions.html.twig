{% extends "student/base.html.twig" %}

{% block title %}
    - Subscriptions
{% endblock %}

{% block pageContent %}

    {% if activePlan %}
        <div class="card card-body bg-transparent border rounded-3">
            <!-- Update plan START -->
            <div class="row g-4">
                <!-- Update plan item -->
                <div class="col-6 col-lg-3">
                    <span>Active Plan</span>
                    <h4>{{ activePlan.abonnement.label }}</h4>
                </div>
                <!-- Update plan item -->
                <div class="col-6 col-lg-3">
                    <span>Monthly limit</span>
                    <h4>Unlimited</h4>
                </div>
                <!-- Update plan item -->
                <div class="col-6 col-lg-3">
                    <span>Cost</span>
                    <h4>{{ activePlan.amount }} XAF</h4>
                </div>

                <!-- Update plan item -->
                <div class="col-6 col-lg-3">
                    <span>Renewal Date</span>
                    <h4>{{ activePlan.expiredAt|date('M d, Y') }}</h4>
                </div>
            </div>
            <!-- Update plan END -->

            <!-- Progress bar -->
            <div class="overflow-hidden my-4">
                <h6 class="mb-0">{{ (100 - ((activePlan.abonnement.duree - nbJoursEcoules) / 100))|number_format(2) }}%</h6>
                <div class="progress progress-sm bg-primary bg-opacity-10">
                    <div class="progress-bar bg-primary aos" role="progressbar" data-aos="slide-right" data-aos-delay="200" data-aos-duration="1000" data-aos-easing="ease-in-out" style="width: {{ (100 - ((activePlan.abonnement.duree - nbJoursEcoules) / 100))|number_format(2) }}%" aria-valuenow="{{ (100 - ((activePlan.abonnement.duree - nbJoursEcoules) / 100))|number_format(2) }}" aria-valuemin="0" aria-valuemax="100">
                    </div>
                </div>
            </div>

            <!-- Button -->
            {# <div class="d-sm-flex justify-content-sm-between align-items-center">
                <div>
                <!-- Switch Content -->
                    <div class="d-sm-flex">
                        <div class="form-check form-switch form-check-md">
                            <input class="form-check-input" type="checkbox" id="checkPrivacy1" checked="">
                            <label class="form-check-label" for="checkPrivacy1">Auto Renewal</label>
                        </div>
                    </div>
                    <p class="mb-0 small">Your plan will automatically renew on: 02/17/2023. Payment Amount: USD250</p>
                </div>	
                <!-- Buttons -->
                <div class="mt-2 mt-sm-0">
                    <button type="button" class="btn btn-sm btn-danger-soft me-2 mb-0">Cancel plan</button>
                    <a href="#" class="btn btn-sm btn-success mb-0">Upgrade plan</a>
                </div>
            </div> #}

            <!-- Divider -->
            <hr>

            <!-- Plan Benefits -->
            <div class="row">
                <h6 class="mb-3">The plan includes</h6>
                <div class="col-md-12">
                    <ul class="list-unstyled row">
                        {% for item in activePlan.abonnement.items %}
                            <div class="col-md-6">
                                <li class="mb-3 h6 fw-light"><i class="bi bi-patch-check-fill text-success me-2"></i>{{ item.label }}</li>
                            </div>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    {% endif %}

{% endblock %}