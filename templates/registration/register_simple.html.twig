{% extends "front/base.html.twig" %}

{% block title %} - Register{% endblock %}

{% block mainContent %}
    <section class="mb-9 position-relative" style="background-image:url(assets/images/bg/07.jpg); background-position: center left; background-size: cover;">
        <!-- Background dark overlay -->
        <div class="bg-overlay bg-blue opacity-9"></div>
        <div class="container z-index-9 position-relative">
            <div class="row g-4 justify-content-between align-items-center">
                <!-- Content -->
                <div class="col-lg-6">
                    <h1 class="text-white">{% trans %}Welcome to our largest community{% endtrans %}</h1>
                    <p class="text-white mb-3">Join our community of learners and educators. Create your account to start your learning journey.</p>
                    <a href="{{ url("app_front_courses") }}" class="btn btn-white mb-0">Explore our courses<i class="bi bi-arrow-right ms-2"></i></a>
                </div>

                <!-- Form -->
                <div class="col-lg-6 col-xl-5 mb-n9">
                    <div class="card card-body shadow p-4 p-sm-5">
                        <!-- Title -->
                        <h2 class="mb-0 h3">Créer votre compte</h2>
                        <p class="mb-0">Vous avez déjà un compte? <a href="{{ path('app_login') }}">Connectez-vous</a></p>

                        <form method="post" class="mt-4">
                            <!-- Invitation Code -->
                            <div class="mb-3">
                                <label class="form-label">Code d'invitation</label>
                                {{ form_widget(registrationForm.invitationCode, {'attr': {'class': 'form-control'}}) }}
                            </div>

                            <!-- Full Name -->
                            <div class="mb-3">
                                <label class="form-label">Nom complet</label>
                                {{ form_widget(registrationForm.fullName, {'attr': {'class': 'form-control'}}) }}
                            </div>

                            <!-- Username -->
                            <div class="mb-3">
                                <label class="form-label">Nom d'utilisateur</label>
                                {{ form_widget(registrationForm.username, {'attr': {'class': 'form-control'}}) }}
                            </div>

                            <!-- Phone Number -->
                            <div class="mb-3">
                                <label class="form-label">Numéro de téléphone</label>
                                {{ form_widget(registrationForm.phoneNumber, {'attr': {'class': 'form-control'}}) }}
                            </div>

                            <!-- Password -->
                            <div class="mb-3">
                                <label class="form-label">Mot de passe</label>
                                {{ form_widget(registrationForm.plainPassword, {'attr': {'class': 'form-control', 'id': 'password'}}) }}
                            </div>

                            <!-- Password Confirmation -->
                            <div class="mb-3">
                                <label class="form-label">Confirmer le mot de passe</label>
                                <input type="password" class="form-control" id="password_confirm" required>
                                <div class="invalid-feedback">
                                    Les mots de passe ne correspondent pas
                                </div>
                            </div>

                            <!-- Terms -->
                            <div class="mb-3">
                                <small>En vous inscrivant, vous acceptez les <a href="#">conditions d'utilisation</a></small>
                            </div>

                            {{ form_widget(registrationForm._token) }}

                            <button type="submit" class="btn btn-primary w-100 mb-0" id="submit_btn">S'inscrire</button>
                        </form>

                        <!-- Password validation script -->
                        <script>
                            document.addEventListener('DOMContentLoaded', function() {
                                const form = document.querySelector('form');
                                const password = document.getElementById('password');
                                const passwordConfirm = document.getElementById('password_confirm');
                                const submitBtn = document.getElementById('submit_btn');

                                function validatePasswords() {
                                    if (password.value !== passwordConfirm.value) {
                                        passwordConfirm.classList.add('is-invalid');
                                        submitBtn.disabled = true;
                                        return false;
                                    } else {
                                        passwordConfirm.classList.remove('is-invalid');
                                        submitBtn.disabled = false;
                                        return true;
                                    }
                                }

                                password.addEventListener('input', validatePasswords);
                                passwordConfirm.addEventListener('input', validatePasswords);

                                form.addEventListener('submit', function(e) {
                                    if (!validatePasswords()) {
                                        e.preventDefault();
                                    }
                                });
                            });
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}
